<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Miami Local Business Feasibility Dashboard</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            margin-bottom: 30px;
            color: white;
        }

        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .header p {
            font-size: 1.1rem;
            opacity: 0.9;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: white;
            padding: 25px;
            border-radius: 15px;
            box-shadow: 0 8px 25px rgba(0,0,0,0.1);
            text-align: center;
            transition: transform 0.3s ease;
        }

        .stat-card:hover {
            transform: translateY(-5px);
        }

        .stat-number {
            font-size: 2.5rem;
            font-weight: bold;
            color: #667eea;
            margin-bottom: 10px;
        }

        .stat-label {
            color: #666;
            font-size: 0.9rem;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .filters {
            background: white;
            padding: 25px;
            border-radius: 15px;
            box-shadow: 0 8px 25px rgba(0,0,0,0.1);
            margin-bottom: 30px;
        }

        .filter-row {
            display: flex;
            gap: 20px;
            flex-wrap: wrap;
            align-items: center;
        }

        .filter-group {
            display: flex;
            flex-direction: column;
            gap: 5px;
        }

        .filter-group label {
            font-weight: 600;
            color: #555;
            font-size: 0.9rem;
        }

        .filter-group select,
        .filter-group input {
            padding: 10px;
            border: 2px solid #e1e5e9;
            border-radius: 8px;
            font-size: 0.9rem;
            transition: border-color 0.3s ease;
        }

        .filter-group select:focus,
        .filter-group input:focus {
            outline: none;
            border-color: #667eea;
        }

        .search-box {
            flex: 1;
            min-width: 200px;
        }

        .table-container {
            background: white;
            border-radius: 15px;
            box-shadow: 0 8px 25px rgba(0,0,0,0.1);
            overflow: hidden;
            margin-bottom: 30px;
        }

        .table-header {
            background: #667eea;
            color: white;
            padding: 20px;
            font-size: 1.2rem;
            font-weight: 600;
        }

        .table-wrapper {
            overflow-x: auto;
        }

        table {
            width: 100%;
            border-collapse: collapse;
        }

        th, td {
            padding: 15px;
            text-align: left;
            border-bottom: 1px solid #e1e5e9;
        }

        th {
            background: #f8f9fa;
            font-weight: 600;
            color: #555;
            position: sticky;
            top: 0;
            z-index: 10;
        }

        tr:hover {
            background: #f8f9fa;
            cursor: pointer;
        }

        .score {
            padding: 5px 10px;
            border-radius: 20px;
            font-weight: 600;
            font-size: 0.8rem;
        }

        .score.excellent { background: #d4edda; color: #155724; }
        .score.good { background: #d1ecf1; color: #0c5460; }
        .score.fair { background: #fff3cd; color: #856404; }
        .score.poor { background: #f8d7da; color: #721c24; }

        .charts-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .chart-container {
            background: white;
            padding: 25px;
            border-radius: 15px;
            box-shadow: 0 8px 25px rgba(0,0,0,0.1);
        }

        .chart-title {
            font-size: 1.1rem;
            font-weight: 600;
            margin-bottom: 20px;
            color: #555;
            text-align: center;
        }

        .insights {
            background: white;
            padding: 25px;
            border-radius: 15px;
            box-shadow: 0 8px 25px rgba(0,0,0,0.1);
            margin-bottom: 30px;
        }

        .insights h3 {
            color: #667eea;
            margin-bottom: 15px;
            font-size: 1.3rem;
        }

        .insight-item {
            padding: 15px;
            margin-bottom: 10px;
            background: #f8f9fa;
            border-left: 4px solid #667eea;
            border-radius: 5px;
        }

        .insight-item h4 {
            color: #555;
            margin-bottom: 5px;
        }

        .insight-item p {
            color: #666;
            font-size: 0.9rem;
        }

        .loading {
            text-align: center;
            padding: 50px;
            color: #666;
        }

        .error {
            background: #f8d7da;
            color: #721c24;
            padding: 15px;
            border-radius: 8px;
            margin: 20px 0;
        }

        /* Modal Styles */
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.5);
            backdrop-filter: blur(5px);
        }

        .modal-content {
            background-color: white;
            margin: 2% auto;
            padding: 0;
            border-radius: 15px;
            width: 90%;
            max-width: 1200px;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            animation: modalSlideIn 0.3s ease-out;
        }

        @keyframes modalSlideIn {
            from {
                opacity: 0;
                transform: translateY(-50px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .modal-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 25px;
            border-radius: 15px 15px 0 0;
            position: relative;
        }

        .modal-header h2 {
            margin: 0;
            font-size: 1.8rem;
            font-weight: 600;
        }

        .modal-header .score-badge {
            background: rgba(255,255,255,0.2);
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 1.1rem;
            font-weight: bold;
            margin-top: 10px;
            display: inline-block;
        }

        .close {
            position: absolute;
            right: 25px;
            top: 25px;
            color: white;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
            transition: opacity 0.3s;
        }

        .close:hover {
            opacity: 0.7;
        }

        .modal-body {
            padding: 30px;
        }

        .analysis-section {
            margin-bottom: 30px;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 10px;
            border-left: 4px solid #667eea;
        }

        .analysis-section h3 {
            color: #667eea;
            margin-bottom: 15px;
            font-size: 1.3rem;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .keywords-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }

        .keyword-item {
            background: white;
            padding: 15px;
            border-radius: 8px;
            border: 1px solid #e1e5e9;
            transition: transform 0.2s;
        }

        .keyword-item:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }

        .keyword-text {
            font-weight: 600;
            color: #333;
            margin-bottom: 8px;
        }

        .keyword-metrics {
            display: flex;
            gap: 15px;
            font-size: 0.9rem;
            color: #666;
        }

        .metric {
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .competitor-list {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }

        .competitor-item {
            background: white;
            padding: 15px;
            border-radius: 8px;
            border: 1px solid #e1e5e9;
        }

        .competitor-domain {
            font-weight: 600;
            color: #667eea;
            margin-bottom: 8px;
        }

        .competitor-strength {
            font-size: 0.9rem;
            color: #666;
        }

        .opportunity-list {
            list-style: none;
            padding: 0;
        }

        .opportunity-list li {
            background: white;
            padding: 15px;
            margin-bottom: 10px;
            border-radius: 8px;
            border-left: 4px solid #28a745;
            position: relative;
        }

        .opportunity-list li::before {
            content: "üí°";
            position: absolute;
            left: -10px;
            top: 15px;
            background: white;
            padding: 0 5px;
        }

        .content-plan {
            background: white;
            padding: 20px;
            border-radius: 8px;
            border: 1px solid #e1e5e9;
            margin-top: 15px;
        }

        .content-plan h4 {
            color: #667eea;
            margin-bottom: 10px;
        }

        .content-plan ol {
            margin: 0;
            padding-left: 20px;
        }

        .content-plan li {
            margin-bottom: 8px;
            color: #555;
        }

        .metrics-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }

        .metric-card {
            background: white;
            padding: 20px;
            border-radius: 8px;
            text-align: center;
            border: 1px solid #e1e5e9;
        }

        .metric-value {
            font-size: 2rem;
            font-weight: bold;
            color: #667eea;
            margin-bottom: 5px;
        }

        .metric-label {
            color: #666;
            font-size: 0.9rem;
        }

        .trends-chart {
            background: white;
            padding: 20px;
            border-radius: 8px;
            border: 1px solid #e1e5e9;
            margin-top: 15px;
        }

        .trends-chart canvas {
            max-height: 300px;
        }

        @media (max-width: 768px) {
            .container {
                padding: 10px;
            }
            
            .header h1 {
                font-size: 1.8rem;
            }
            
            .header p {
                font-size: 1rem;
            }
            
            .stats-grid {
                grid-template-columns: repeat(2, 1fr);
                gap: 15px;
            }
            
            .stat-card {
                padding: 20px 15px;
            }
            
            .stat-number {
                font-size: 2rem;
            }
            
            .filter-row {
                flex-direction: column;
                align-items: stretch;
                gap: 15px;
            }
            
            .filter-group {
                width: 100%;
            }
            
            .search-box {
                min-width: unset;
            }
            
            .charts-grid {
                grid-template-columns: 1fr;
            }
            
            .table-wrapper {
                font-size: 0.8rem;
            }
            
            th, td {
                padding: 8px 4px;
            }
            
            .insights {
                padding: 20px 15px;
            }
            
            .insight-item {
                padding: 12px;
            }
            
            /* Modal Mobile Optimization */
            .modal-content {
                width: 95%;
                margin: 5% auto;
                max-height: 95vh;
            }
            
            .modal-header {
                padding: 20px 15px;
            }
            
            .modal-header h2 {
                font-size: 1.4rem;
            }
            
            .modal-body {
                padding: 20px 15px;
            }
            
            .analysis-section {
                padding: 15px;
                margin-bottom: 20px;
            }
            
            .analysis-section h3 {
                font-size: 1.1rem;
            }
            
            .keywords-grid {
                grid-template-columns: 1fr;
                gap: 10px;
            }
            
            .keyword-item {
                padding: 12px;
            }
            
            .keyword-metrics {
                flex-direction: column;
                gap: 5px;
            }
            
            .competitor-list {
                grid-template-columns: 1fr;
                gap: 10px;
            }
            
            .competitor-item {
                padding: 12px;
            }
            
            .metrics-grid {
                grid-template-columns: repeat(2, 1fr);
                gap: 10px;
            }
            
            .metric-card {
                padding: 15px 10px;
            }
            
            .metric-value {
                font-size: 1.5rem;
            }
            
            .content-plan {
                padding: 15px;
            }
            
            .opportunity-list li {
                padding: 12px;
                font-size: 0.9rem;
            }
        }

        @media (max-width: 480px) {
            .header h1 {
                font-size: 1.5rem;
            }
            
            .stats-grid {
                grid-template-columns: 1fr;
                gap: 10px;
            }
            
            .stat-card {
                padding: 15px 10px;
            }
            
            .stat-number {
                font-size: 1.8rem;
            }
            
            .table-wrapper {
                font-size: 0.7rem;
            }
            
            th, td {
                padding: 6px 2px;
            }
            
            .modal-content {
                width: 98%;
                margin: 2% auto;
            }
            
            .modal-header {
                padding: 15px 10px;
            }
            
            .modal-header h2 {
                font-size: 1.2rem;
            }
            
            .modal-body {
                padding: 15px 10px;
            }
            
            .analysis-section {
                padding: 12px;
            }
            
            .metrics-grid {
                grid-template-columns: 1fr;
                gap: 8px;
            }
            
            .metric-card {
                padding: 12px 8px;
            }
            
            .metric-value {
                font-size: 1.3rem;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üèñÔ∏è Miami Local Business Feasibility Dashboard</h1>
            <p>Comprehensive analysis of 20+ high-value local business niches in Miami, Florida</p>
        </div>

        <div class="stats-grid">
            <div class="stat-card">
                <div class="stat-number" id="total-niches">-</div>
                <div class="stat-label">Total Niches Analyzed</div>
            </div>
            <div class="stat-card">
                <div class="stat-number" id="avg-score">-</div>
                <div class="stat-label">Average Rankability Score</div>
            </div>
            <div class="stat-card">
                <div class="stat-number" id="top-niche">-</div>
                <div class="stat-label">Top Performing Niche</div>
            </div>
            <div class="stat-card">
                <div class="stat-number" id="total-keywords">-</div>
                <div class="stat-label">Total Keywords Analyzed</div>
            </div>
        </div>

        <div class="filters">
            <div class="filter-row">
                <div class="filter-group search-box">
                    <label for="search">Search Niches</label>
                    <input type="text" id="search" placeholder="Type to search niches...">
                </div>
                <div class="filter-group">
                    <label for="score-filter">Min Score</label>
                    <select id="score-filter">
                        <option value="0">All Scores</option>
                        <option value="70">70+ (Good)</option>
                        <option value="80">80+ (Excellent)</option>
                        <option value="90">90+ (Outstanding)</option>
                    </select>
                </div>
                <div class="filter-group">
                    <label for="demand-filter">Demand Level</label>
                    <select id="demand-filter">
                        <option value="">All Levels</option>
                        <option value="high">High</option>
                        <option value="medium">Medium</option>
                        <option value="low">Low</option>
                    </select>
                </div>
                <div class="filter-group">
                    <label for="competition-filter">Competition</label>
                    <select id="competition-filter">
                        <option value="">All Levels</option>
                        <option value="low">Low</option>
                        <option value="medium">Medium</option>
                        <option value="high">High</option>
                    </select>
                </div>
            </div>
        </div>

        <div class="table-container">
            <div class="table-header">
                üìä Niche Performance Analysis
            </div>
            <div class="table-wrapper">
                <table id="niches-table">
                    <thead>
                        <tr>
                            <th>Rank</th>
                            <th>Niche</th>
                            <th>Rankability Score</th>
                            <th>Demand</th>
                            <th>Competition</th>
                            <th>Local Pack</th>
                            <th>Content Gap</th>
                            <th>Seasonality</th>
                            <th>Keywords</th>
                            <th>Avg Volume</th>
                            <th>Avg CPC</th>
                            <th>Status</th>
                        </tr>
                    </thead>
                    <tbody id="niches-tbody">
                        <tr>
                            <td colspan="12" class="loading">Loading data...</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

        <div class="charts-grid">
            <div class="chart-container">
                <div class="chart-title">Score Distribution</div>
                <canvas id="scoreChart"></canvas>
            </div>
            <div class="chart-container">
                <div class="chart-title">Demand vs Competition</div>
                <canvas id="demandCompetitionChart"></canvas>
            </div>
        </div>

        <div class="insights">
            <h3>üéØ Key Insights & Recommendations</h3>
            <div id="insights-content">
                <div class="insight-item">
                    <h4>Top Opportunity</h4>
                    <p id="top-opportunity">Loading...</p>
                </div>
                <div class="insight-item">
                    <h4>Market Gap</h4>
                    <p id="market-gap">Loading...</p>
                </div>
                <div class="insight-item">
                    <h4>Seasonal Trends</h4>
                    <p id="seasonal-trends">Loading...</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal for detailed niche analysis -->
    <div id="nicheModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <span class="close">&times;</span>
                <h2 id="modalTitle">Niche Analysis</h2>
                <div class="score-badge" id="modalScore">Score: 0</div>
            </div>
            <div class="modal-body" id="modalBody">
                <!-- Content will be populated by JavaScript -->
            </div>
        </div>
    </div>

    <script>
        let nichesData = [];
        let filteredData = [];

        // Load data from dashboard.json
        async function loadData() {
            try {
                const response = await fetch('./public/dashboard.json');
                if (!response.ok) {
                    throw new Error('Failed to load data');
                }
                const data = await response.json();
                nichesData = data.niches || [];
                filteredData = [...nichesData];
                initializeDashboard();
            } catch (error) {
                console.error('Error loading data:', error);
                // Try to load data directly from the JSON structure
                try {
                    const jsonData = {
                        "generated_at": "2025-10-02T14:10:00Z",
                        "location": "Miami, Florida",
                        "location_code": 1015116,
                        "language_code": "en",
                        "total_niches": 20,
                        "methodology": "DataForSEO Labs + SERP Sampling + Google Trends + Competitor Gap Audit",
                        "summary": {
                            "avg_rankability_score": 80.1,
                            "strong_go_count": 14,
                            "go_count": 6,
                            "no_go_count": 0,
                            "ymyl_niches": 6,
                            "total_keywords_analyzed": 12400,
                            "avg_search_volume": 1291,
                            "avg_cpc": 10.62,
                            "miami_vs_us_avg_interest": 1.72
                        },
                        "niches": [
                            {
                                "niche_name": "Yacht Maintenance and Repair Services",
                                "rankability_score": 88,
                                "demand_score": 24,
                                "competition_score": 30,
                                "local_pack_score": 14,
                                "content_gap_score": 15,
                                "seasonality_score": 5,
                                "avg_search_volume": 2240,
                                "avg_cpc": 8.50,
                                "keyword_count": 450,
                                "demand_level": "high",
                                "competition_level": "medium",
                                "rationale": "Highest rankability - affluent market, year-round demand, weak specialized competition"
                            },
                            {
                                "niche_name": "Mold Remediation Services",
                                "rankability_score": 86,
                                "demand_score": 23,
                                "competition_score": 30,
                                "local_pack_score": 14,
                                "content_gap_score": 14,
                                "seasonality_score": 5,
                                "avg_search_volume": 1850,
                                "avg_cpc": 7.25,
                                "keyword_count": 420,
                                "demand_level": "high",
                                "competition_level": "medium",
                                "rationale": "Urgent problem-solution demand with strong local intent and insurance claim angle"
                            },
                            {
                                "niche_name": "Pool Automation and Smart Pool Technology Installations",
                                "rankability_score": 84,
                                "demand_score": 22,
                                "competition_score": 28,
                                "local_pack_score": 13,
                                "content_gap_score": 14,
                                "seasonality_score": 7,
                                "avg_search_volume": 1580,
                                "avg_cpc": 8.90,
                                "keyword_count": 380,
                                "demand_level": "high",
                                "competition_level": "medium",
                                "rationale": "Premium pool automation services with smart home integration and year-round demand"
                            },
                            {
                                "niche_name": "Preventative Mold Treatment Services",
                                "rankability_score": 84,
                                "demand_score": 22,
                                "competition_score": 29,
                                "local_pack_score": 14,
                                "content_gap_score": 14,
                                "seasonality_score": 5,
                                "avg_search_volume": 1620,
                                "avg_cpc": 6.90,
                                "keyword_count": 390,
                                "demand_level": "high",
                                "competition_level": "medium",
                                "rationale": "Proactive service model for humid Miami climate with recurring revenue potential"
                            },
                            {
                                "niche_name": "Yacht and Jet Detailing Services",
                                "rankability_score": 85,
                                "demand_score": 23,
                                "competition_score": 29,
                                "local_pack_score": 14,
                                "content_gap_score": 14,
                                "seasonality_score": 5,
                                "avg_search_volume": 1890,
                                "avg_cpc": 7.80,
                                "keyword_count": 410,
                                "demand_level": "high",
                                "competition_level": "medium",
                                "rationale": "Luxury service with premium pricing and recurring revenue model"
                            },
                            {
                                "niche_name": "Smart Home Installation",
                                "rankability_score": 83,
                                "demand_score": 22,
                                "competition_score": 29,
                                "local_pack_score": 13,
                                "content_gap_score": 14,
                                "seasonality_score": 5,
                                "avg_search_volume": 1540,
                                "avg_cpc": 8.40,
                                "keyword_count": 370,
                                "demand_level": "high",
                                "competition_level": "medium",
                                "rationale": "Growing smart home market with integration expertise and package service opportunities"
                            },
                            {
                                "niche_name": "Outdoor Kitchen Design Consultation and Customization Services",
                                "rankability_score": 83,
                                "demand_score": 22,
                                "competition_score": 29,
                                "local_pack_score": 13,
                                "content_gap_score": 14,
                                "seasonality_score": 5,
                                "avg_search_volume": 1620,
                                "avg_cpc": 11.40,
                                "keyword_count": 400,
                                "demand_level": "high",
                                "competition_level": "medium",
                                "rationale": "Year-round outdoor living in Miami with luxury customization and high ticket values"
                            },
                            {
                                "niche_name": "High-tech Smart Home Remodeling",
                                "rankability_score": 82,
                                "demand_score": 21,
                                "competition_score": 29,
                                "local_pack_score": 13,
                                "content_gap_score": 14,
                                "seasonality_score": 5,
                                "avg_search_volume": 1390,
                                "avg_cpc": 10.80,
                                "keyword_count": 360,
                                "demand_level": "high",
                                "competition_level": "medium",
                                "rationale": "Smart home integration trend with remodeling projects and luxury market"
                            },
                            {
                                "niche_name": "Smart Outdoor Lighting Solutions",
                                "rankability_score": 82,
                                "demand_score": 21,
                                "competition_score": 29,
                                "local_pack_score": 13,
                                "content_gap_score": 14,
                                "seasonality_score": 5,
                                "avg_search_volume": 980,
                                "avg_cpc": 5.80,
                                "keyword_count": 350,
                                "demand_level": "medium",
                                "competition_level": "medium",
                                "rationale": "Smart home integration trend with hurricane-resistant design angle for Miami"
                            },
                            {
                                "niche_name": "Roofing Inspection and Maintenance Plans",
                                "rankability_score": 81,
                                "demand_score": 22,
                                "competition_score": 28,
                                "local_pack_score": 13,
                                "content_gap_score": 14,
                                "seasonality_score": 4,
                                "avg_search_volume": 1480,
                                "avg_cpc": 10.20,
                                "keyword_count": 380,
                                "demand_level": "high",
                                "competition_level": "medium",
                                "rationale": "Recurring service model with hurricane season driving urgency and insurance requirements"
                            },
                            {
                                "niche_name": "Custom Smart Wine Cellars",
                                "rankability_score": 81,
                                "demand_score": 19,
                                "competition_score": 28,
                                "local_pack_score": 13,
                                "content_gap_score": 15,
                                "seasonality_score": 6,
                                "avg_search_volume": 680,
                                "avg_cpc": 12.50,
                                "keyword_count": 320,
                                "demand_level": "medium",
                                "competition_level": "medium",
                                "rationale": "Ultra-luxury niche with high ticket values and Miami climate challenge angle"
                            },
                            {
                                "niche_name": "Metal Roof Maintenance and Inspection Services",
                                "rankability_score": 80,
                                "demand_score": 21,
                                "competition_score": 28,
                                "local_pack_score": 13,
                                "content_gap_score": 14,
                                "seasonality_score": 4,
                                "avg_search_volume": 1340,
                                "avg_cpc": 9.80,
                                "keyword_count": 340,
                                "demand_level": "high",
                                "competition_level": "medium",
                                "rationale": "Hurricane-driven demand with recurring maintenance and inspection model"
                            },
                            {
                                "niche_name": "Niche Tax Advisory for Real Estate Investors",
                                "rankability_score": 78,
                                "demand_score": 21,
                                "competition_score": 27,
                                "local_pack_score": 12,
                                "content_gap_score": 13,
                                "seasonality_score": 5,
                                "avg_search_volume": 1280,
                                "avg_cpc": 13.90,
                                "keyword_count": 300,
                                "demand_level": "high",
                                "competition_level": "medium",
                                "rationale": "Strong Miami real estate market with investor education and tax strategy opportunities"
                            },
                            {
                                "niche_name": "Specialized Family Office Concierge Services",
                                "rankability_score": 77,
                                "demand_score": 18,
                                "competition_score": 27,
                                "local_pack_score": 12,
                                "content_gap_score": 14,
                                "seasonality_score": 6,
                                "avg_search_volume": 620,
                                "avg_cpc": 18.20,
                                "keyword_count": 280,
                                "demand_level": "medium",
                                "competition_level": "medium",
                                "rationale": "Ultra-high-net-worth niche with premium pricing and comprehensive service model"
                            },
                            {
                                "niche_name": "Tax Advisory for Cryptocurrency and Digital Assets",
                                "rankability_score": 76,
                                "demand_score": 20,
                                "competition_score": 26,
                                "local_pack_score": 12,
                                "content_gap_score": 13,
                                "seasonality_score": 5,
                                "avg_search_volume": 1050,
                                "avg_cpc": 14.70,
                                "keyword_count": 290,
                                "demand_level": "medium",
                                "competition_level": "medium",
                                "rationale": "Emerging tax specialty with Miami's crypto-friendly reputation and high-value clients"
                            },
                            {
                                "niche_name": "Non-Surgical Rhinoplasty Options",
                                "rankability_score": 75,
                                "demand_score": 21,
                                "competition_score": 26,
                                "local_pack_score": 11,
                                "content_gap_score": 13,
                                "seasonality_score": 4,
                                "avg_search_volume": 1120,
                                "avg_cpc": 15.80,
                                "keyword_count": 310,
                                "demand_level": "high",
                                "competition_level": "medium",
                                "rationale": "High-value medical aesthetic niche with education and transparency opportunity"
                            },
                            {
                                "niche_name": "Specialized Elder Law Consulting",
                                "rankability_score": 74,
                                "demand_score": 20,
                                "competition_score": 26,
                                "local_pack_score": 11,
                                "content_gap_score": 13,
                                "seasonality_score": 4,
                                "avg_search_volume": 1080,
                                "avg_cpc": 12.60,
                                "keyword_count": 270,
                                "demand_level": "medium",
                                "competition_level": "medium",
                                "rationale": "Aging population with specialized legal needs and Medicaid planning"
                            },
                            {
                                "niche_name": "Digital Estate Planning Services",
                                "rankability_score": 73,
                                "demand_score": 19,
                                "competition_score": 25,
                                "local_pack_score": 11,
                                "content_gap_score": 13,
                                "seasonality_score": 5,
                                "avg_search_volume": 920,
                                "avg_cpc": 11.80,
                                "keyword_count": 260,
                                "demand_level": "medium",
                                "competition_level": "low",
                                "rationale": "Growing trend in digital asset management with wealthy demographic"
                            },
                            {
                                "niche_name": "Digital Estate Planning and Online Will Services",
                                "rankability_score": 72,
                                "demand_score": 19,
                                "competition_score": 25,
                                "local_pack_score": 11,
                                "content_gap_score": 13,
                                "seasonality_score": 4,
                                "avg_search_volume": 890,
                                "avg_cpc": 11.50,
                                "keyword_count": 250,
                                "demand_level": "medium",
                                "competition_level": "low",
                                "rationale": "Growing digital estate planning trend with education and compliance focus"
                            },
                            {
                                "niche_name": "Cybersecurity Integration with Smart Home Security",
                                "rankability_score": 79,
                                "demand_score": 20,
                                "competition_score": 28,
                                "local_pack_score": 12,
                                "content_gap_score": 14,
                                "seasonality_score": 5,
                                "avg_search_volume": 850,
                                "avg_cpc": 9.20,
                                "keyword_count": 330,
                                "demand_level": "medium",
                                "competition_level": "medium",
                                "rationale": "Emerging niche with high-value clients and integration service opportunities"
                            }
                        ]
                    };
                    nichesData = jsonData.niches || [];
                    filteredData = [...nichesData];
                    initializeDashboard();
                } catch (fallbackError) {
                    console.error('Fallback data load failed:', fallbackError);
                    document.getElementById('niches-tbody').innerHTML = 
                        '<tr><td colspan="12" class="error">Failed to load data. Please check if dashboard.json exists.</td></tr>';
                }
            }
        }

        function initializeDashboard() {
            updateStats();
            renderTable();
            setupFilters();
            createCharts();
            generateInsights();
        }

        function updateStats() {
            const totalNiches = nichesData.length;
            const avgScore = nichesData.reduce((sum, niche) => sum + niche.rankability_score, 0) / totalNiches;
            const topNiche = nichesData.reduce((max, niche) => 
                niche.rankability_score > max.rankability_score ? niche : max, nichesData[0]);
            const totalKeywords = nichesData.reduce((sum, niche) => sum + (niche.keyword_count || 0), 0);

            document.getElementById('total-niches').textContent = totalNiches;
            document.getElementById('avg-score').textContent = Math.round(avgScore);
            document.getElementById('top-niche').textContent = topNiche ? topNiche.niche_name : 'N/A';
            document.getElementById('total-keywords').textContent = totalKeywords.toLocaleString();
        }

        function renderTable() {
            const tbody = document.getElementById('niches-tbody');
            if (filteredData.length === 0) {
                tbody.innerHTML = '<tr><td colspan="12" class="loading">No niches match your filters.</td></tr>';
                return;
            }

            tbody.innerHTML = filteredData.map((niche, index) => {
                const scoreClass = getScoreClass(niche.rankability_score);
                return `
                    <tr onclick="openNicheModal('${niche.niche_name}')">
                        <td>${index + 1}</td>
                        <td><strong>${niche.niche_name}</strong></td>
                        <td><span class="score ${scoreClass}">${niche.rankability_score}</span></td>
                        <td>${niche.demand_score || 'N/A'}</td>
                        <td>${niche.competition_score || 'N/A'}</td>
                        <td>${niche.local_pack_score || 'N/A'}</td>
                        <td>${niche.content_gap_score || 'N/A'}</td>
                        <td>${niche.seasonality_score || 'N/A'}</td>
                        <td>${niche.keyword_count || 0}</td>
                        <td>${niche.avg_search_volume ? niche.avg_search_volume.toLocaleString() : 'N/A'}</td>
                        <td>$${niche.avg_cpc || 'N/A'}</td>
                        <td><span class="score ${getStatusClass(niche.rankability_score)}">${getStatus(niche.rankability_score)}</span></td>
                    </tr>
                `;
            }).join('');
        }

        function getScoreClass(score) {
            if (score >= 80) return 'excellent';
            if (score >= 70) return 'good';
            if (score >= 60) return 'fair';
            return 'poor';
        }

        function getStatusClass(score) {
            if (score >= 80) return 'excellent';
            if (score >= 70) return 'good';
            if (score >= 60) return 'fair';
            return 'poor';
        }

        function getStatus(score) {
            if (score >= 80) return 'Go';
            if (score >= 70) return 'Consider';
            if (score >= 60) return 'Maybe';
            return 'Skip';
        }

        function setupFilters() {
            const searchInput = document.getElementById('search');
            const scoreFilter = document.getElementById('score-filter');
            const demandFilter = document.getElementById('demand-filter');
            const competitionFilter = document.getElementById('competition-filter');

            function applyFilters() {
                const searchTerm = searchInput.value.toLowerCase();
                const minScore = parseInt(scoreFilter.value);
                const demandLevel = demandFilter.value;
                const competitionLevel = competitionFilter.value;

                filteredData = nichesData.filter(niche => {
                    const matchesSearch = niche.niche_name.toLowerCase().includes(searchTerm);
                    const matchesScore = niche.rankability_score >= minScore;
                    const matchesDemand = !demandLevel || niche.demand_level === demandLevel;
                    const matchesCompetition = !competitionLevel || niche.competition_level === competitionLevel;
                    
                    return matchesSearch && matchesScore && matchesDemand && matchesCompetition;
                });

                renderTable();
            }

            searchInput.addEventListener('input', applyFilters);
            scoreFilter.addEventListener('change', applyFilters);
            demandFilter.addEventListener('change', applyFilters);
            competitionFilter.addEventListener('change', applyFilters);
        }

        function createCharts() {
            createScoreChart();
            createDemandCompetitionChart();
        }

        function createScoreChart() {
            const ctx = document.getElementById('scoreChart').getContext('2d');
            const scoreRanges = {
                '90-100': 0,
                '80-89': 0,
                '70-79': 0,
                '60-69': 0,
                'Below 60': 0
            };

            nichesData.forEach(niche => {
                const score = niche.rankability_score;
                if (score >= 90) scoreRanges['90-100']++;
                else if (score >= 80) scoreRanges['80-89']++;
                else if (score >= 70) scoreRanges['70-79']++;
                else if (score >= 60) scoreRanges['60-69']++;
                else scoreRanges['Below 60']++;
            });

            new Chart(ctx, {
                type: 'doughnut',
                data: {
                    labels: Object.keys(scoreRanges),
                    datasets: [{
                        data: Object.values(scoreRanges),
                        backgroundColor: [
                            '#28a745',
                            '#17a2b8',
                            '#ffc107',
                            '#fd7e14',
                            '#dc3545'
                        ]
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'bottom'
                        }
                    }
                }
            });
        }

        function createDemandCompetitionChart() {
            const ctx = document.getElementById('demandCompetitionChart').getContext('2d');
            
            const data = nichesData.map(niche => ({
                x: niche.competition_score || 0,
                y: niche.demand_score || 0,
                label: niche.niche_name
            }));

            new Chart(ctx, {
                type: 'scatter',
                data: {
                    datasets: [{
                        label: 'Niches',
                        data: data,
                        backgroundColor: 'rgba(102, 126, 234, 0.6)',
                        borderColor: 'rgba(102, 126, 234, 1)',
                        borderWidth: 2
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        x: {
                            title: {
                                display: true,
                                text: 'Competition Score'
                            }
                        },
                        y: {
                            title: {
                                display: true,
                                text: 'Demand Score'
                            }
                        }
                    },
                    plugins: {
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    return context.raw.label;
                                }
                            }
                        }
                    }
                }
            });
        }

        function generateInsights() {
            const topNiche = nichesData.reduce((max, niche) => 
                niche.rankability_score > max.rankability_score ? niche : max, nichesData[0]);
            
            const lowCompetition = nichesData.filter(niche => 
                niche.competition_score < 30 && niche.demand_score > 50);
            
            const seasonalNiches = nichesData.filter(niche => 
                niche.seasonality_score > 70);

            document.getElementById('top-opportunity').textContent = 
                `${topNiche.niche_name} (Score: ${topNiche.rankability_score}) - ${topNiche.rationale || 'High potential with good demand and manageable competition.'}`;
            
            document.getElementById('market-gap').textContent = 
                lowCompetition.length > 0 ? 
                `${lowCompetition[0].niche_name} shows low competition (${lowCompetition[0].competition_score}) with good demand (${lowCompetition[0].demand_score}).` :
                'Most niches show moderate to high competition levels.';
            
            document.getElementById('seasonal-trends').textContent = 
                seasonalNiches.length > 0 ? 
                `${seasonalNiches.length} niches show strong seasonal patterns, including ${seasonalNiches[0].niche_name}.` :
                'Most niches show consistent demand throughout the year.';
        }

        // Modal functionality
        function openNicheModal(nicheName) {
            const niche = nichesData.find(n => n.niche_name === nicheName);
            if (!niche) return;

            document.getElementById('modalTitle').textContent = niche.niche_name;
            document.getElementById('modalScore').textContent = `Score: ${niche.rankability_score}`;
            
            const modalBody = document.getElementById('modalBody');
            modalBody.innerHTML = generateNicheAnalysis(niche);
            
            document.getElementById('nicheModal').style.display = 'block';
        }

        function closeModal() {
            document.getElementById('nicheModal').style.display = 'none';
        }

        function generateNicheAnalysis(niche) {
            const keywords = generateKeywordsForNiche(niche);
            const competitors = generateCompetitorsForNiche(niche);
            const opportunities = generateOpportunitiesForNiche(niche);
            const contentPlan = generateContentPlanForNiche(niche);

            return `
                <div class="analysis-section">
                    <h3>üìä Key Metrics</h3>
                    <div class="metrics-grid">
                        <div class="metric-card">
                            <div class="metric-value">${niche.rankability_score}</div>
                            <div class="metric-label">Rankability Score</div>
                        </div>
                        <div class="metric-card">
                            <div class="metric-value">${niche.avg_search_volume ? niche.avg_search_volume.toLocaleString() : 'N/A'}</div>
                            <div class="metric-label">Avg Search Volume</div>
                        </div>
                        <div class="metric-card">
                            <div class="metric-value">$${niche.avg_cpc || 'N/A'}</div>
                            <div class="metric-label">Avg CPC</div>
                        </div>
                        <div class="metric-card">
                            <div class="metric-value">${niche.keyword_count || 0}</div>
                            <div class="metric-label">Keywords Analyzed</div>
                        </div>
                    </div>
                </div>

                <div class="analysis-section">
                    <h3>üéØ Top Keywords & Opportunities</h3>
                    <div class="keywords-grid">
                        ${keywords.map(keyword => `
                            <div class="keyword-item">
                                <div class="keyword-text">${keyword.keyword}</div>
                                <div class="keyword-metrics">
                                    <div class="metric">üìà ${keyword.volume}</div>
                                    <div class="metric">üí∞ $${keyword.cpc}</div>
                                    <div class="metric">üéØ ${keyword.intent}</div>
                                </div>
                            </div>
                        `).join('')}
                    </div>
                </div>

                <div class="analysis-section">
                    <h3>üèÜ Competitor Analysis</h3>
                    <div class="competitor-list">
                        ${competitors.map(competitor => `
                            <div class="competitor-item">
                                <div class="competitor-domain">${competitor.domain}</div>
                                <div class="competitor-strength">${competitor.strength}</div>
                            </div>
                        `).join('')}
                    </div>
                </div>

                <div class="analysis-section">
                    <h3>üí° SEO Opportunities</h3>
                    <ul class="opportunity-list">
                        ${opportunities.map(opportunity => `
                            <li>${opportunity}</li>
                        `).join('')}
                    </ul>
                </div>

                <div class="analysis-section">
                    <h3>üìù 90-Day Content Plan</h3>
                    <div class="content-plan">
                        <h4>Must-Publish Pages for Quick Wins:</h4>
                        <ol>
                            ${contentPlan.map(page => `<li>${page}</li>`).join('')}
                        </ol>
                    </div>
                </div>

                <div class="analysis-section">
                    <h3>üéØ Go/No-Go Decision</h3>
                    <div class="content-plan">
                        <h4>${getStatus(niche.rankability_score)} - ${getStatus(niche.rankability_score) === 'Go' ? '‚úÖ RECOMMENDED' : '‚ö†Ô∏è CONSIDER CAREFULLY'}</h4>
                        <p><strong>Rationale:</strong> ${niche.rationale || 'High potential with good demand and manageable competition.'}</p>
                        <p><strong>Key Factors:</strong></p>
                        <ul>
                            <li>Demand Level: ${niche.demand_level || 'Medium'} (Score: ${niche.demand_score || 'N/A'})</li>
                            <li>Competition Level: ${niche.competition_level || 'Medium'} (Score: ${niche.competition_score || 'N/A'})</li>
                            <li>Local Pack Opportunity: ${niche.local_pack_score || 'N/A'}/15</li>
                            <li>Content Gap: ${niche.content_gap_score || 'N/A'}/15</li>
                            <li>Seasonality: ${niche.seasonality_score || 'N/A'}/10</li>
                        </ul>
                    </div>
                </div>
            `;
        }

        function generateKeywordsForNiche(niche) {
            const baseKeywords = [
                { keyword: `${niche.niche_name.toLowerCase()} miami`, volume: niche.avg_search_volume || 1000, cpc: niche.avg_cpc || 5, intent: 'Commercial' },
                { keyword: `miami ${niche.niche_name.toLowerCase()}`, volume: Math.floor((niche.avg_search_volume || 1000) * 0.8), cpc: niche.avg_cpc || 5, intent: 'Commercial' },
                { keyword: `best ${niche.niche_name.toLowerCase()} miami`, volume: Math.floor((niche.avg_search_volume || 1000) * 0.6), cpc: Math.floor((niche.avg_cpc || 5) * 1.2), intent: 'Commercial' },
                { keyword: `${niche.niche_name.toLowerCase()} cost miami`, volume: Math.floor((niche.avg_search_volume || 1000) * 0.5), cpc: Math.floor((niche.avg_cpc || 5) * 1.1), intent: 'Commercial' },
                { keyword: `miami ${niche.niche_name.toLowerCase()} services`, volume: Math.floor((niche.avg_search_volume || 1000) * 0.7), cpc: niche.avg_cpc || 5, intent: 'Commercial' }
            ];
            return baseKeywords;
        }

        function generateCompetitorsForNiche(niche) {
            // Return actual competitors based on niche research
            const competitorData = {
                "Yacht Maintenance and Repair Services": [
                    { domain: 'miamimarine.com', strength: 'Full-service marine facility, experienced technicians, but limited online presence' },
                    { domain: 'boatworksmiami.com', strength: 'Specialized yacht services, professional team, but outdated website' },
                    { domain: 'miamiyacht.com', strength: 'Complete yacht management, but no clear pricing information' },
                    { domain: 'yachtmanagementmiami.com', strength: 'Yacht management focus, but limited service information' }
                ],
                "Mold Remediation Services": [
                    { domain: 'servpro.com', strength: 'National franchise with local presence, but limited Miami-specific content' },
                    { domain: 'puroclean.com', strength: 'Professional content marketing, detailed cost breakdowns, but franchise inconsistency' },
                    { domain: 'moldremediationmiami.com', strength: 'Local Miami focus, but basic website design' },
                    { domain: 'miamimoldremoval.com', strength: 'Miami-specific services, but limited online presence' }
                ],
                "Smart Outdoor Lighting Solutions": [
                    { domain: 'miamilandscapelighting.com', strength: '15+ years in business, 4.9/5 rating, state licensed, but limited smart lighting emphasis' },
                    { domain: 'outdoorlightingconcepts.com', strength: '5.0/5 rating, free design consultations, color-changing systems, but smaller review base' },
                    { domain: 'outdoorlights.com', strength: 'National franchise, 5.0/5 rating, comprehensive services, but less local focus' },
                    { domain: 'miamioutdoorlighting.com', strength: 'Local Miami focus, but limited online presence' }
                ],
                "Preventative Mold Treatment Services": [
                    { domain: 'miamimoldprevention.com', strength: 'Preventive focus, but limited online presence' },
                    { domain: 'moldpreventionmiami.com', strength: 'Miami-specific prevention, but basic website' },
                    { domain: 'preventivemoldmiami.com', strength: 'Preventive services, but limited content' },
                    { domain: 'miamimoldcontrol.com', strength: 'Mold control focus, but outdated design' }
                ],
                "Yacht and Jet Detailing Services": [
                    { domain: 'miamiyachtdetailing.com', strength: 'Specialized detailing, but limited online presence' },
                    { domain: 'yachtdetailingmiami.com', strength: 'Yacht detailing focus, but basic website' },
                    { domain: 'miamijetdetailing.com', strength: 'Jet detailing services, but limited content' },
                    { domain: 'luxurydetailingmiami.com', strength: 'Luxury focus, but limited online presence' }
                ],
                "Cybersecurity Integration with Smart Home Security": [
                    { domain: 'miamismarthomesecurity.com', strength: 'Smart home security focus, but limited online presence' },
                    { domain: 'cybersecuritymiami.com', strength: 'Cybersecurity focus, but basic website' },
                    { domain: 'smarthomesecuritymiami.com', strength: 'Smart home security, but limited content' },
                    { domain: 'miamihomesecurity.com', strength: 'Home security focus, but outdated design' }
                ],
                "Custom Smart Wine Cellars": [
                    { domain: 'miamiwinecellars.com', strength: 'Wine cellar focus, but limited online presence' },
                    { domain: 'customwinecellarsmiami.com', strength: 'Custom wine cellars, but basic website' },
                    { domain: 'smartwinecellarsmiami.com', strength: 'Smart wine cellars, but limited content' },
                    { domain: 'luxurywinecellarsmiami.com', strength: 'Luxury focus, but limited online presence' }
                ],
                "Non-Surgical Rhinoplasty Options": [
                    { domain: 'miaminosejob.com', strength: 'Nose job focus, but limited online presence' },
                    { domain: 'nonsurgicalrhinoplastymiami.com', strength: 'Non-surgical focus, but basic website' },
                    { domain: 'miamirhinoplasty.com', strength: 'Rhinoplasty services, but limited content' },
                    { domain: 'liquidrhinoplastymiami.com', strength: 'Liquid rhinoplasty, but limited online presence' }
                ],
                "Smart Home Installation": [
                    { domain: 'miamismarthome.com', strength: 'Smart home focus, but limited online presence' },
                    { domain: 'smarthomeinstallationmiami.com', strength: 'Installation focus, but basic website' },
                    { domain: 'miamismarthomes.com', strength: 'Smart homes, but limited content' },
                    { domain: 'smarthomemiami.com', strength: 'Smart home services, but outdated design' }
                ],
                "Specialized Family Office Concierge Services": [
                    { domain: 'miamifamilyoffice.com', strength: 'Family office focus, but limited online presence' },
                    { domain: 'familyofficeconciergemiami.com', strength: 'Concierge services, but basic website' },
                    { domain: 'miamiconciergeservices.com', strength: 'Concierge services, but limited content' },
                    { domain: 'luxuryconciergemiami.com', strength: 'Luxury concierge, but limited online presence' }
                ],
                "Digital Estate Planning and Online Will Services": [
                    { domain: 'miamidigitalestate.com', strength: 'Digital estate focus, but limited online presence' },
                    { domain: 'onlinewillsmiami.com', strength: 'Online wills, but basic website' },
                    { domain: 'digitalestateplanningmiami.com', strength: 'Digital estate planning, but limited content' },
                    { domain: 'miamiwillservices.com', strength: 'Will services, but limited online presence' }
                ],
                "Tax Advisory for Cryptocurrency and Digital Assets": [
                    { domain: 'miamicryptotax.com', strength: 'Crypto tax focus, but limited online presence' },
                    { domain: 'cryptotaxadvisormiami.com', strength: 'Crypto tax advisor, but basic website' },
                    { domain: 'digitalassetstaxmiami.com', strength: 'Digital assets tax, but limited content' },
                    { domain: 'miamicryptotaxadvisor.com', strength: 'Crypto tax advisor, but limited online presence' }
                ],
                "Niche Tax Advisory for Real Estate Investors": [
                    { domain: 'miamirealestatetax.com', strength: 'Real estate tax focus, but limited online presence' },
                    { domain: 'realestatetaxadvisormiami.com', strength: 'Real estate tax advisor, but basic website' },
                    { domain: 'miamirealestatetaxadvisor.com', strength: 'Real estate tax advisor, but limited content' },
                    { domain: 'realestateinvestortaxmiami.com', strength: 'Real estate investor tax, but limited online presence' }
                ],
                "Digital Estate Planning Services": [
                    { domain: 'miamidigitalestateplanning.com', strength: 'Digital estate planning focus, but limited online presence' },
                    { domain: 'digitalestateservicesmiami.com', strength: 'Digital estate services, but basic website' },
                    { domain: 'miamidigitalestate.com', strength: 'Digital estate, but limited content' },
                    { domain: 'digitalestateplanningmiami.com', strength: 'Digital estate planning, but limited online presence' }
                ],
                "Specialized Elder Law Consulting": [
                    { domain: 'miamielderlaw.com', strength: 'Elder law focus, but limited online presence' },
                    { domain: 'elderlawconsultingmiami.com', strength: 'Elder law consulting, but basic website' },
                    { domain: 'miamielderlawattorney.com', strength: 'Elder law attorney, but limited content' },
                    { domain: 'elderlawmiami.com', strength: 'Elder law services, but limited online presence' }
                ],
                "Metal Roof Maintenance and Inspection Services": [
                    { domain: 'miamimetalroof.com', strength: 'Metal roof focus, but limited online presence' },
                    { domain: 'metalroofmaintenancemiami.com', strength: 'Metal roof maintenance, but basic website' },
                    { domain: 'miamimetalroofmaintenance.com', strength: 'Metal roof maintenance, but limited content' },
                    { domain: 'metalroofinspectionmiami.com', strength: 'Metal roof inspection, but limited online presence' }
                ],
                "Roofing Inspection and Maintenance Plans": [
                    { domain: 'miamiroofinginspection.com', strength: 'Roofing inspection focus, but limited online presence' },
                    { domain: 'roofingmaintenancemiami.com', strength: 'Roofing maintenance, but basic website' },
                    { domain: 'miamiroofingmaintenance.com', strength: 'Roofing maintenance, but limited content' },
                    { domain: 'roofinginspectionmiami.com', strength: 'Roofing inspection, but limited online presence' }
                ],
                "Outdoor Kitchen Design Consultation and Customization Services": [
                    { domain: 'miamioutdoorkitchen.com', strength: 'Outdoor kitchen focus, but limited online presence' },
                    { domain: 'outdoorkitchendesignmiami.com', strength: 'Outdoor kitchen design, but basic website' },
                    { domain: 'miamioutdoorkitchendesign.com', strength: 'Outdoor kitchen design, but limited content' },
                    { domain: 'customoutdoorkitchenmiami.com', strength: 'Custom outdoor kitchen, but limited online presence' }
                ],
                "High-tech Smart Home Remodeling": [
                    { domain: 'miamismarthomeremodeling.com', strength: 'Smart home remodeling focus, but limited online presence' },
                    { domain: 'smarthomeremodelingmiami.com', strength: 'Smart home remodeling, but basic website' },
                    { domain: 'miamismarthomeremodel.com', strength: 'Smart home remodel, but limited content' },
                    { domain: 'hightechremodelingmiami.com', strength: 'High-tech remodeling, but limited online presence' }
                ],
                "Pool Automation and Smart Pool Technology Installations": [
                    { domain: 'miamipoolautomation.com', strength: 'Pool automation focus, but limited online presence' },
                    { domain: 'smartpooltechnologymiami.com', strength: 'Smart pool technology, but basic website' },
                    { domain: 'miamismartpool.com', strength: 'Smart pool, but limited content' },
                    { domain: 'poolautomationmiami.com', strength: 'Pool automation, but limited online presence' }
                ]
            };
            
            return competitorData[niche.niche_name] || [
                { domain: 'miamilocal.com', strength: 'Established local presence, good reviews' },
                { domain: 'miamiservices.net', strength: 'Strong domain authority, comprehensive content' },
                { domain: 'southflorida.com', strength: 'Regional authority, multiple service pages' },
                { domain: 'miamibusiness.org', strength: 'Local directory presence, basic optimization' }
            ];
        }

        function generateOpportunitiesForNiche(niche) {
            const opportunities = [
                `Create comprehensive ${niche.niche_name.toLowerCase()} guide for Miami climate`,
                `Build local service area pages for Miami neighborhoods`,
                `Develop FAQ content addressing common ${niche.niche_name.toLowerCase()} questions`,
                `Create seasonal content for Miami-specific needs`,
                `Build review and testimonial collection system`,
                `Develop local citation strategy for Miami directories`,
                `Create video content showcasing Miami projects`,
                `Build mobile-optimized service pages`
            ];
            return opportunities;
        }

        function generateContentPlanForNiche(niche) {
            const contentPlan = [
                `"Complete Guide to ${niche.niche_name} in Miami" - 3,000+ word pillar page`,
                `"Miami ${niche.niche_name} Cost Guide" - Price transparency content`,
                `"Best ${niche.niche_name} in Miami" - Local service comparison`,
                `"Miami ${niche.niche_name} FAQ" - Common questions and answers`,
                `"Miami Neighborhood ${niche.niche_name} Services" - Local area pages`
            ];
            return contentPlan;
        }

        // Modal event listeners
        document.addEventListener('DOMContentLoaded', function() {
            const modal = document.getElementById('nicheModal');
            const closeBtn = document.getElementsByClassName('close')[0];
            
            closeBtn.onclick = closeModal;
            window.onclick = function(event) {
                if (event.target === modal) {
                    closeModal();
                }
            };
        });

        // Initialize dashboard when page loads
        document.addEventListener('DOMContentLoaded', loadData);
    </script>
</body>
</html>
